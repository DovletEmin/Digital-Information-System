# –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π - –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–£–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã:**

- ‚ùå `docker-compose.dev.yml`
- ‚ùå `Dockerfile.dev`
- ‚ùå `Dockerfile.offline`
- ‚ùå `requirements/base.txt`
- ‚ùå `requirements/dev.txt`
- ‚ùå `requirements/prod.txt`

**–û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:**

- ‚úÖ `docker-compose.yml` - –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –¥–µ–ø–ª–æ—è
- ‚úÖ `Dockerfile` - –≥–æ—Ç–æ–≤ –∫ production
- ‚úÖ `requirements.txt` - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

### 2. –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

- –£–¥–∞–ª–µ–Ω—ã `args: ENV=prod/dev` (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã)
- –£–¥–∞–ª–µ–Ω—ã `DJANGO_ENV=prod` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é production)
- –£–¥–∞–ª–µ–Ω—ã –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ `deploy.resources` (Docker —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç)
- –£–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–°–µ—Ä–≤–∏—Å—ã:**

- `web` - Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Ä—Ç 8000)
- `db` - PostgreSQL 15
- `redis` - Redis 7
- `elasticsearch` - Elasticsearch 7.17.13
- `celery-worker` - —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- `celery-beat` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

### 3. –û–±–Ω–æ–≤–ª–µ–Ω Dockerfile

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

- –£–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ `ARG ENV`
- –£–ø—Ä–æ—â–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω `EXPOSE 8000`
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π "Production-ready"

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:**

- `README.md` - —É–ø—Ä–æ—â–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- `DEV_SETUP.md` - —É–±—Ä–∞–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ docker-compose.dev.yml
- `REQUIREMENTS_UPDATE.md` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É–ø—Ä–æ—â–µ–Ω–∏–∏
- `CHANGELOG.md` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã

**–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª:**

- `DEPLOY.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 5. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã

**–§–∞–π–ª—ã:**

- `scripts/download_wheels.py` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å requirements.txt
- `scripts/prepare_offline.ps1` - —É–ø—Ä–æ—â–µ–Ω
- `scripts/prepare_offline.sh` - —É–ø—Ä–æ—â–µ–Ω

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourusername/smu-library.git
cd smu-library

# –°–æ–∑–¥–∞—Ç—å .env
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d --build

# –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker-compose exec web python manage.py createsuperuser
```

### Production –¥–µ–ø–ª–æ–π

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git clone https://github.com/yourusername/smu-library.git
cd smu-library

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env –¥–ª—è production
nano .env
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DEBUG=False
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ALLOWED_HOSTS=your-domain.com
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SECRET_KEY

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d --build

# –ì–æ—Ç–æ–≤–æ!
```

–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [DEPLOY.md](DEPLOY.md)

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### –î–æ —É–ø—Ä–æ—â–µ–Ω–∏—è

```
‚îú‚îÄ‚îÄ docker-compose.yml          # Production
‚îú‚îÄ‚îÄ docker-compose.dev.yml      # Development
‚îú‚îÄ‚îÄ Dockerfile                  # Production build
‚îú‚îÄ‚îÄ Dockerfile.dev              # Dev build
‚îú‚îÄ‚îÄ Dockerfile.offline          # Offline build
‚îî‚îÄ‚îÄ requirements/
    ‚îú‚îÄ‚îÄ base.txt                # –ë–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îú‚îÄ‚îÄ dev.txt                 # Dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îî‚îÄ‚îÄ prod.txt                # Prod –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

**–ü—Ä–æ–±–ª–µ–º—ã:**

- üòï –ü—É—Ç–∞–Ω–∏—Ü–∞ –∫–∞–∫–æ–π —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- üòï –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üòï –°–ª–æ–∂–Ω—ã–π –¥–µ–ø–ª–æ–π (–Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å —Ñ–ª–∞–≥–∏)
- üòï –ë–æ–ª—å—à–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –ü–æ—Å–ª–µ —É–ø—Ä–æ—â–µ–Ω–∏—è

```
‚îú‚îÄ‚îÄ docker-compose.yml          # –ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –≤—Å–µ–≥–æ
‚îú‚îÄ‚îÄ Dockerfile                  # –ï–¥–∏–Ω—ã–π Dockerfile
‚îî‚îÄ‚îÄ requirements.txt            # –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ - –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞
- ‚úÖ –ú–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ - –ø—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
- ‚úÖ –ù–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã - –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ

## üìù –ö–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å–∫
docker-compose up -d --build

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –õ–æ–≥–∏
docker-compose logs -f

# –°—Ç–∞—Ç—É—Å
docker-compose ps
```

### Django –∫–æ–º–∞–Ω–¥—ã

```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec web python manage.py migrate

# –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
docker-compose exec web python manage.py createsuperuser

# –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É
docker-compose exec web python manage.py collectstatic --noinput

# Django shell
docker-compose exec web python manage.py shell
```

### –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git pull
docker-compose up -d --build

# –ë—ç–∫–∞–ø –ë–î
docker-compose exec db pg_dump -U smu smu > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
docker-compose exec -T db psql -U smu smu < backup.sql

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ø–æ–∏—Å–∫–∞
docker-compose exec web python manage.py search_index --rebuild
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ production

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env –ø—Ä–∞–≤–∏–ª—å–Ω–æ

```env
DEBUG=False
SECRET_KEY=<—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–ª—å–Ω—ã–π –∫–ª—é—á>
ALLOWED_HOSTS=your-domain.com,www.your-domain.com
POSTGRES_PASSWORD=<—Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å>
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Nginx

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL

```bash
sudo certbot --nginx -d your-domain.com
```

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall

```bash
sudo ufw allow 22     # SSH
sudo ufw allow 80     # HTTP
sudo ufw allow 443    # HTTPS
sudo ufw enable
```

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
smu-library/
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                  # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ requirements.txt            # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ DEPLOY.md                   # üìò –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
‚îú‚îÄ‚îÄ README.md                   # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ src/                        # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Django
    ‚îú‚îÄ‚îÄ manage.py
    ‚îú‚îÄ‚îÄ content/                # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îî‚îÄ‚îÄ src/                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
        ‚îî‚îÄ‚îÄ settings.py
```

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ (—É–∂–µ –≤–∫–ª—é—á–µ–Ω)
   - Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD**
   - GitHub Actions –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
   - Load balancer –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

4. **–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ**
   - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ—Å—Ç–æ–º—É –¥–µ–ø–ª–æ—é –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ:

1. **–û–¥–∏–Ω docker-compose.yml** - –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë
2. **–û–¥–∏–Ω Dockerfile** - —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **–û–¥–∏–Ω requirements.txt** - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
4. **–ü—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã** - docker-compose up -d --build

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** ~5 –º–∏–Ω—É—Ç
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –õ–µ–≥–∫–∞—è

---

**–î–∞—Ç–∞:** 23 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production
